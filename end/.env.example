# ==============================================
# Gemini Proxy 核心配置文件
# ==============================================

# --- 1. 基础服务配置 ---
TZ=Asia/Shanghai
NODE_ENV=production
# Node.js 服务端口 (容器内)
PORT=8889
# 公网访问地址 (用于生成 Vertex Mock JSON)
DOMAIN_NAME=47.239.10.174:8888

# --- 2. 数据库 (MySQL) ---
DB_HOST=api-proxy-mysql
DB_PORT=3306
DB_NAME=oauth2_mock
DB_USER=oauth2_user
DB_PASSWORD=oauth2_password_123456
DB_CHARSET=utf8mb4
# 是否开启调试日志
DEBUG_MODE=false

# --- 3. 缓存 (Redis) ---
REDIS_HOST=api-proxy-redis
REDIS_PORT=6379
REDIS_PASSWORD=123456
REDIS_DB=0

# --- 4. API 路径定义 ---
# 管理后台 API 前缀
API_PREFIX=/api
# 管理页面路径
ADMIN_PATH=/admin
# Swagger 文档路径
SWAGGER_PATH=/api-docs

# --- 5. 日志配置 ---
LOG_LEVEL=info
# 容器内日志挂载路径
LOG_DIR=/app/logs

# --- 6. 安全配置 (CORS) ---
CORS_ORIGIN=*
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-Requested-With

# --- 7. Nginx 调优 (透传给 Nginx 容器) ---
WORKER_PROCESSES=auto
WORKER_CONNECTIONS=1024
PROXY_READ_TIMEOUT=300
PROXY_CONNECT_TIMEOUT=60
# Lua Body 解析限制 (字节), 默认 512KB
LUA_BODY_PARSE_LIMIT=524288

# --- 8. Docker Compose 配置 ---
# 忽略"孤儿容器"警告 (因为我们使用了多个 compose 文件)
COMPOSE_IGNORE_ORPHANS=True

# --- 9. 测试与调试 ---
# 全局 Mock 模式开关 (true/false)
# 开启后：
# 1. Go 服务会向本地 Mock 接口请求 Token，而不是 Google。
# 2. Nginx 会将所有 API 请求转发到本地 Mock 接口。
ENABLE_MOCK_MODE=true

# 是否记录请求/响应的 Body 内容 (true/false)
# 生产环境建议设置为 false 以保护用户隐私和节省存储空间
LOG_SAVE_BODY=false

# --- 10. 安全配置 ---
# JWT 签名密钥 (请修改为复杂的随机字符串)
JWT_SECRET=gemini_proxy_secret_key_2025
